<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Docker-Compose - Docker Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Docker Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Docker</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Docker-Compose</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href=".." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-light">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#docker-compose" class="nav-link">Docker Compose</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#docker-compose-overview" class="nav-link">Docker Compose Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#docker-compose-files" class="nav-link">Docker Compose Files</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#compose-command-line-interface" class="nav-link">Compose Command-Line Interface</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="docker-compose">Docker Compose</h1>
<h2 id="docker-compose-overview">Docker Compose Overview</h2>
<h4 id="motivation">Motivation</h4>
<p>By using Docker compose, we can manage multi container environments using a Declarative approach, instead of the traditional imperative approach by using just docker commands.</p>
<h4 id="docker-compose-parts">Docker Compose Parts</h4>
<ul>
<li><strong>Compose File:</strong> Declare the services in your application</li>
<li><strong>Command-line Interface:</strong> The docker compose command line has many of the same commands as docker. You can check out the commands by using <code>docker-compose</code>. You can run the docker compose file by simply using <code>docker compose up -d</code>. Similary, to stop docker compose, just write <code>docker compose down</code>.</li>
</ul>
<h2 id="docker-compose-files">Docker Compose Files</h2>
<h4 id="yaml">YAML</h4>
<p>YAML is a data serialization language. YAML files can have the extension <code>.yaml</code> or <code>.yml</code>.</p>
<p><strong>YAML Data Types</strong></p>
<ul>
<li>Integers</li>
<li>Strings</li>
<li>Null</li>
<li>Booleans</li>
</ul>
<p><strong>YAML Collections: Mappings</strong></p>
<ul>
<li>Mappings: Key-Value pairs.</li>
<li>Nested Mappings </li>
<li>Inline Nested Mappings</li>
</ul>
<p><strong>YAML Collections: Sequences</strong>
Sequences are indicated by <code>-</code> sign. </p>
<p><strong>YAML Comments</strong>
Comments start with <code>#</code>.</p>
<h4 id="compose-files">Compose Files</h4>
<p>Root elements of file mapping</p>
<ul>
<li>version</li>
<li>services</li>
<li>volumes</li>
<li>networks</li>
</ul>
<p><strong>Compose File Version:</strong> key: value pair - <code>version: '3.8'</code></p>
<p><strong>Compose File Services:</strong> Services in your application. Nested mapping of services under the <code>services</code> key. Configuration options in a further nested mapping.</p>
<p><strong>Compose File Service Caveats:</strong> </p>
<ul>
<li>Some configurations only apply to Swarm mode.</li>
<li>Some are specified on the command-line.</li>
</ul>
<p><strong>Compose File Dependencies</strong></p>
<ul>
<li><code>depends_on</code> - can use this command to specify what this service depends on</li>
<li>links</li>
</ul>
<p><strong>Compose File Service Configuration</strong></p>
<p>Compose file key - </p>
<ul>
<li>Specify Image: image</li>
<li>Specify volume: volumes</li>
<li>Publish ports on host: ports</li>
<li>Environment variables: environment</li>
<li>Logging: logging</li>
<li>Security options: security_opt</li>
</ul>
<p><strong>Compose File Volumes</strong></p>
<ul>
<li>Allows naming and sharing of volumes</li>
<li>Supports <code>external</code> volumes</li>
</ul>
<pre><code class="language-yaml">volumes:
    named-volume:
    external-volume:
        external: true
</code></pre>
<p><strong>Compose File Network</strong>
One network is created by default, which is the <code>bridge</code> network. It is shown by the <code>networks:</code> key in the root elements.</p>
<pre><code class="language-yaml">networks:
    service1:
    service2:
        external: true
</code></pre>
<p><strong>Extension Fields</strong></p>
<ul>
<li>Extension fields helps us reuse configuration fragments</li>
<li>Extension fields are indicated by using root keys beginning with <code>x-</code></li>
<li>It uses YAML anchors</li>
</ul>
<p>Example Extension fields</p>
<pre><code class="language-yaml">x-logging: #extension field
    &amp;default-logging #using yaml anchors
    options:
    driver:

service:
    web:
        image:
        logging: *default-logging
</code></pre>
<h2 id="compose-command-line-interface">Compose Command-Line Interface</h2>
<h4 id="features">Features</h4>
<ul>
<li>Run multiple isolated environments on a single host</li>
<li>Parallel execution model</li>
<li>Compose file change detection. Everytime you build a container using compose, it stores the container configuration as cache. So the next time you run it, it can run directly from the cache if no changes are made but it can also detect the changes.</li>
</ul>
<h4 id="commands">Commands</h4>
<p><code>docker-compose [OPTIONS] [COMMAND] [ARGS]</code></p>
<p>Compose will use the docker daemon on the host by default.</p>
<ul>
<li>Can connect to remote hosts with -H</li>
<li>Secure remote connections with --tls* options</li>
<li>The default file for docker-compose is - <code>docker-compose.(yml|yaml)</code>. But you can use the <code>-f</code> flag to specify alternatives.</li>
<li>
<p>Each isolated application is associated with a project in compose. The project is given a name and that name appears in resources that get created by Compose. You can assign a custom compose name using a <code>-p</code> flag.</p>
</li>
<li>
<p><code>docker-compose up -d</code> </p>
<ul>
<li>Creates network and named volumes</li>
<li>Builds, creates, starts, and attaches to service containers.</li>
<li>Performs change detection</li>
</ul>
</li>
<li>
<p><code>docker-compose down -d</code></p>
<ul>
<li>Removes service containers, named and default networks</li>
<li>Leaves volumes and images by default.</li>
</ul>
</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/jquery-3.6.0.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
